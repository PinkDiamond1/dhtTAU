package io.taucoin.genesis;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import com.frostwire.jlibtorrent.Ed25519;
import com.frostwire.jlibtorrent.Pair;

import java.math.BigInteger;
import java.util.HashMap;

import io.taucoin.config.ChainConfig;
import io.taucoin.util.ByteUtil;
import io.taucoin.param.ChainParam;
public class GenesisTest {
    private static final Logger log = LoggerFactory.getLogger("genesisTest");
    private static final ChainConfig cf  = ChainConfig.NewTauChainConfig();
    private static final String minerpubkey = "98409aeabb9156f6bd3658cbfd8a03d2860da1939ccf5493323235d632589571";
    private static final String sig = "ee88e46bc571d98db8f0c57ea33bee489609791edf247f43950af2d8cfe5fd4665af4b1f5ec6e71b33e4e076f508a2e95a2e259a9400570f722d11411499afd614";
    private static final String generationSig = "4a9b7fa2a4f5cfba2ac1f159c26d1e93a771024e96f28ca22d667adf98947f5f";
    private static final String communityMsg = "f901789392636f6d6d756e69747920636861696e2e2e2eb857b855636137326661396331303035333134326331333032343235343132643666366163316230336562646332636263356663373637366431633331666464623665313a6339383730316336626635323633343030303830b857b855633739386663393161343033626366633664623230666662336331643966353935326566636238653039623430393733333863623739373439393361323130633a6339383730316336626635323633343030303830b857b855313864633465653933313637373066323631636131376364336262663331393330316139663039333062653361626366666262373365373361353064396662313a6339383730316336626635323633343030303830b857b855303930313339623430636466626334653830336630613532393366333030356161623531333265303838333231626166343463323736616433636634616264613a6339383730316336626635323633343030303830";
    private static final GenesisMsg msg = new GenesisMsg(ByteUtil.toByte(communityMsg));
    private static final ChainConfig ccf = ChainConfig.NewChainConfig(1,"hello world",600,minerpubkey,generationSig,msg,sig);
    private static final ChainConfig ccf1 = ChainConfig.NewChainConfig(1,"beijing",600,minerpubkey,generationSig,msg,sig);
    private static final String genesis = "f9019701880000000000e4e1c0808721d0369d03697880853136383838f901449190746175636f696e20636861696e2e2e2eb897b89535386238663937396135313164633365623161343261323338383139383838383030313666663436333338666363633862343633373936393533373765643639626133393833383063336433643665306133653365393262323361353063326136633034663366383732343932636232313662653834306138663730663130303a6339383730316336626635323633343030303830b897b89564306463313565316636653366323130396430383966313165303837393034373263643961333961636565663664663435373533633362356265653963313437363439633832646561623739323134393262356435313031323433313865393433343632656564343763616330613939383235643835366165623433343962333a6339383730316336626635323633343030303830b4544155636f696e23333030233339333833383330333633363636333333393333363433383333363533393333333833373334333480";
    private static final String cgenesis = "f9028a0188000000005ee9df9d808721d0369d03697880b84034613962376661326134663563666261326163316631353963323664316539336137373130323465393666323863613232643636376164663938393437663566f901789392636f6d6d756e69747920636861696e2e2e2eb857b855636137326661396331303035333134326331333032343235343132643666366163316230336562646332636263356663373637366431633331666464623665313a6339383730316336626635323633343030303830b857b855633739386663393161343033626366633664623230666662336331643966353935326566636238653039623430393733333863623739373439393361323130633a6339383730316336626635323633343030303830b857b855313864633465653933313637373066323631636131376364336262663331393330316139663039333062653361626366666262373365373361353064396662313a6339383730316336626635323633343030303830b857b855303930313339623430636466626334653830336630613532393366333030356161623531333265303838333231626166343463323736616433636634616264613a6339383730316336626635323633343030303830b46265696a696e67233630302333393338333433303339363136353631363236323339333133353336363633363632363433333336b88265653838653436626335373164393864623866306335376561333362656534383936303937393165646632343766343339353061663264386366653566643436363561663462316635656336653731623333653465303736663530386132653935613265323539613934303035373066373232643131343131343939616664363134";
    @Test
    public void createTauGenesis(){
        Genesis genesis = new Genesis(cf);
        log.debug(ByteUtil.toHexString(genesis.getEncoded()));
    }

    @Test
    public void createCommunityGenesis(){
        Genesis genesis = new Genesis(ccf);
        String str = ByteUtil.toHexString(genesis.getEncoded());
        log.debug(str);
        log.debug("size is: "+str.length()/2 +" bytes");

        Genesis genesis1 = new Genesis(ccf1);
        String str1 = ByteUtil.toHexString(genesis1.getEncoded());
        log.debug(str1);
        log.debug("size is: "+str1.length()/2 +" bytes");
    }

    @Test
    public void decodeTauGenesis(){
        Genesis genesis = new Genesis(ByteUtil.toByte(this.genesis));
        log.debug("chainid: "+genesis.getChainid());
    }

    @Test
    public void decodeCommunityGenesis(){
        Genesis genesis = new Genesis(ByteUtil.toByte(this.cgenesis));
        log.debug("chainid: "+genesis.getChainid());
    }

}
