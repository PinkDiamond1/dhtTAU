package io.taucoin.types;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import io.taucoin.util.ByteUtil;

public class TransactionTest {
    private static final Logger log = LoggerFactory.getLogger("transactionTest");
    private static final String txdata = "f889809a736861726520796f7572206661766f7572697465206d75736963b86b687474703a2f2f7777772e6b75676f752e636f6d2f736f6e672f366e6e796162622e68746d6c3f66726f6d62616964753f66726f6d626169647523686173683d423036413434304234433231453239423334414338303338453330384530324626616c62756d5f69643d30";
    private static final String chainid = "TAUcoin#300#3938383036366633393364383365393338373434";
    private static final String sender = "c5897865e8cd75d4aec7fe9583a869c8b962921cc6aef2bf5ed3ff2aed0eb23c";
    private static final String signature ="65281f3c2fe309683c74762f965f38bd8f8910d8dbeca1da904d6821e8101075776243379a4efdfdc8c10ae34be767a825f770e6a62b5430c030f179b74057e747";
    private static final String transaction = "f9019f01b4544155636f696e233330302333393338333833303336333636363333333933333634333833333635333933333338333733343334880000000008f0d1801e84ffffffc4b84063353839373836356538636437356434616563376665393538336138363963386239363239323163633661656632626635656433666632616564306562323363880000000000000000f889809a736861726520796f7572206661766f7572697465206d75736963b86b687474703a2f2f7777772e6b75676f752e636f6d2f736f6e672f366e6e796162622e68746d6c3f66726f6d62616964753f66726f6d626169647523686173683d423036413434304234433231453239423334414338303338453330384530324626616c62756d5f69643d30b88236353238316633633266653330393638336337343736326639363566333862643866383931306438646265636131646139303464363832316538313031303735373736323433333739613465666466646338633130616533346265373637613832356637373065366136326235343330633033306631373962373430353765373437";
    private static final byte version = 1;
    private static final short expire = 30;

    @Test
    public void createTransaction(){
        TxData txData = new TxData(ByteUtil.toByte(txdata));
        Transaction tx = new Transaction(version,chainid,150000000,expire,-60,sender,0,txData,signature);
        log.debug(ByteUtil.toHexString(tx.getEncoded()));
        log.debug("size of tx: "+transaction.length()/2);
    }

    @Test
    public void decodeTransaction(){
        Transaction tx = new Transaction(ByteUtil.toByte(transaction));
        log.debug("fee: "+tx.getTxFee());
        log.debug(tx.getTxData().getAnnoucement());
    }
}
