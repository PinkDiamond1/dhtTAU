# Taucoin-android数据库设计

## 用户表（Users）设计
<table>
	<tr>
		<th>序号</th>
		<th>列名</th>
		<th>类型</th>
		<th>说明</th>
		<th>是否允许为空</th>
		<th>备注</th>
	</tr>
	<tr>
		<td>1</td>
		<td>publicKey</td>
		<td>TEXT</td>
		<td>用户的公钥</td>
		<td></td>
		<td>主键</td>
	</tr>
	<tr>
		<td>2</td>
		<td>seed</td>
		<td>TEXT</td>
		<td>用户的seed</td>
		<td>&radic;</td>
		<td>仅设备登陆用户有值</td>
	</tr>
	<tr>
		<td>3</td>
		<td>localName</td>
		<td>TEXT</td>
		<td>用户本地备注名</td>
		<td>&radic;</td>
		<td></td>
	</tr>
	<tr>
		<td>4</td>
		<td>isCurrentUser</td>
		<td>INTEGER</td>
		<td>是否是当前用户</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>5</td>
		<td>onlineTime</td>
		<td>INTEGER</td>
		<td>成员最后一次在线时间</td>
		<td></td>
		<td>成员发新的message或挖新的block时更新此值</td>
	</tr>
	<tr>
		<td>6</td>
		<td>blacklist</td>
		<td>INTEGER</td>
		<td>成员是否被用户拉入黑名单</td>
		<td></td>
		<td></td>
	</tr>
</table>


## 社区表（Communities）设计
<table>
	<tr>
		<th>序号</th>
		<th>列名</th>
		<th>类型</th>
		<th>说明</th>
		<th>是否允许为空</th>
		<th>备注</th>
	</tr>
	<tr>
		<td>1</td>
		<td>chainID</td>
		<td>TEXT</td>
		<td>社区的chainID</td>
		<td></td>
		<td>主键</td>
	</tr>
	<tr>
		<td>2</td>
		<td>communityName</td>
		<td>TEXT</td>
		<td>社区名字</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>3</td>
		<td>totalBlocks</td>
		<td>INTEGER</td>
		<td>社区总区块数</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>4</td>
		<td>syncBlock</td>
		<td>INTEGER</td>
		<td>已同步到区块数</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>5</td>
		<td>blacklist</td>
		<td>INTEGER</td>
		<td>社区是否被用户拉入黑名单</td>
		<td></td>
		<td></td>
	</tr>
</table>

## 成员表（Members）设计
<table>
	<tr>
		<th>序号</th>
		<th>列名</th>
		<th>类型</th>
		<th>说明</th>
		<th>是否允许为空</th>
		<th>备注</th>
	</tr>
	<tr>
		<td>1</td>
		<td>chainID</td>
		<td>TEXT</td>
		<td>成员所属社区的chainID</td>
		<td></td>
		<td>主键</td>
	</tr>
	<tr>
		<td>2</td>
		<td>publicKey</td>
		<td>TEXT</td>
		<td>成员的公钥</td>
		<td></td>
		<td>主键</td>
	</tr>
	<tr>
		<td>3</td>
		<td>balance</td>
		<td>INTEGER</td>
		<td>成员的balance</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>4</td>
		<td>power</td>
		<td>INTEGER</td>
		<td>成员的power</td>
		<td></td>
		<td></td>
	</tr>
</table>

## 交易表（Txs）设计
<table>
	<tr>
		<th>序号</th>
		<th>列名</th>
		<th>类型</th>
		<th>说明</th>
		<th>是否允许为空</th>
		<th>备注</th>
	</tr>
	<tr>
		<td>1</td>
		<td>txID</td>
		<td>TEXT</td>
		<td>交易ID</td>
		<td></td>
		<td>主键</td>
	</tr>
	<tr>
		<td>2</td>
		<td>chainID</td>
		<td>TEXT</td>
		<td>交易所属社区chainID</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>3</td>
		<td>senderPk</td>
		<td>TEXT</td>
		<td>交易发送者的公钥</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>4</td>
		<td>fee</td>
		<td>INTEGER</td>
		<td>交易费</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>5</td>
		<td>timestamp</td>
		<td>INTEGER</td>
		<td>交易时间戳</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>6</td>
		<td>nonce</td>
		<td>INTEGER</td>
		<td>交易nonce</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>7</td>
		<td>txType</td>
		<td>INTEGER</td>
		<td>交易类型，同MsgType中枚举类型</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>8</td>
		<td>memo</td>
		<td>TEXT</td>
		<td> 交易的备注、描述、评论等</td>
		<td>&radic;</td>
		<td></td>
	</tr>
	<tr>
		<td>9</td>
		<td>txStatus</td>
		<td>INTEGER</td>
		<td>交易的状态</td>
		<td></td>
		<td>0：未上链（在交易池中）；1：上链成功 (不上链)</td>
	</tr>
	<tr>
		<td>10</td>
		<td>receiverPk</td>
		<td>TEXT</td>
		<td>交易接收者的公钥</td>
		<td>&radic;</td>
		<td>只针对MsgType.Wiring类型</td>
	</tr>
	<tr>
		<td>11</td>
		<td>amount</td>
		<td>INTEGER</td>
		<td>交易金额</td>
		<td></td>
		<td>只针对MsgType.Wiring类型</td>
	</tr>
	<tr>
		<td>12</td>
		<td>favourite</td>
		<td>INTEGER</td>
		<td>交易是否加入收藏</td>
		<td></td>
		<td></td>
	</tr>
</table>

## 消息表（Messages）设计
<table>
	<tr>
		<th>序号</th>
		<th>列名</th>
		<th>类型</th>
		<th>说明</th>
		<th>是否允许为空</th>
		<th>备注</th>
	</tr>
	<tr>
		<td>1</td>
		<td>msgID</td>
		<td>TEXT</td>
		<td>消息的ID</td>
		<td></td>
		<td>主键</td>
	</tr>
	<tr>
		<td>2</td>
		<td>chainID</td>
		<td>TEXT</td>
		<td>消息所属社区chainID</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>3</td>
		<td>senderPk</td>
		<td>TEXT</td>
		<td>消息发送者的公钥</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>4</td>
		<td>timestamp</td>
		<td>INTEGER</td>
		<td>消息时间戳</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>5</td>
		<td>context</td>
		<td>TEXT</td>
		<td>消息内容</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td>6</td>
		<td>replyID</td>
		<td>TEXT</td>
		<td>被回复的消息ID</td>
		<td>&radic;</td>
		<td></td>
	</tr>
	<tr>
		<td>7</td>
		<td>favourite</td>
		<td>INTEGER</td>
		<td>消息是否加入收藏</td>
		<td></td>
		<td></td>
	</tr>
</table>
